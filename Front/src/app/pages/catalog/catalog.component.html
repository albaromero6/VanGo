<section class="catalog-section">

    <div class="catalog-content">

        <!-- Cargando -->
        <div *ngIf="loading" class="loading-container">
            <div class="loading-spinner"></div>
            <p>Cargando vehículos...</p>
        </div>

        <!-- Error -->
        <div *ngIf="error" class="error-container">
            <p class="error-message">{{ error }}</p>
            <button class="btn-retry" (click)="loadVehicles()">Reintentar</button>
        </div>

        <div *ngIf="!loading && !error" class="vehicles-grid">
            <div *ngFor="let vehicle of vehicles" class="vehicle-card">
                <div class="vehicle-image">
                    <img [src]="getVehicleImage(vehicle)" [alt]="getVehicleName(vehicle)"
                        (error)="onImageError($event)">
                </div>
                <div class="vehicle-info">
                    <h3 class="vehicle-name">{{ getVehicleName(vehicle) }}</h3>
                    <div class="vehicle-details">
                        <div class="details-top">
                            <span class="vehicle-fuel">
                                <img src="assets/img/Combustible.png" alt="Combustible" class="detail-icon">
                                {{ formatCombustible(vehicle.combustible) }}
                            </span>
                            <span class="vehicle-transmission">
                                <img src="assets/img/Transmision.png" alt="Transmision" class="detail-icon">
                                {{ formatTransmision(vehicle.transmision) }}
                            </span>
                        </div>
                        <div class="details-bottom">
                            <span class="vehicle-door">
                                <img src="assets/img/Puertas.png" alt="Puertas" class="detail-icon">
                                {{ vehicle.puertas }}
                            </span>
                            <span class="vehicle-year">
                                <img src="assets/img/Calendario3.png" alt="Año" class="detail-icon">
                                {{ vehicle.anio }}
                            </span>
                            <span class="vehicle-passengers">
                                <img src="assets/img/Pasajeros.png" alt="Pasajeros" class="detail-icon">
                                {{ vehicle.pasajeros }}
                            </span>
                        </div>
                    </div>
                    <div class="vehicle-price">
                        <span class="price-label">Precio</span>
                        <div class="price-content">
                            <span class="price-amount">{{ vehicle.precio }}€</span>
                            <span class="price-period">/día</span>
                        </div>
                    </div>
                    <button class="btn-alquilar" (click)="verDetalles(vehicle.idVeh)">
                        Ver detalles
                    </button>
                </div>
            </div>
        </div>

        <div *ngIf="!loading && !error && vehicles.length === 0" class="no-vehicles">
            <p>No hay vehículos disponibles en este momento</p>
        </div>
    </div>
</section>